---
marp: true
paginate: true
theme: custom
---

<!-- _class: cover -->

<h1 class="logo"><b>CODE</b>_THE_WEB #8</h1>
<p class="title">コードでウェブをつくろう #8</p>
<p class="author">&copy; 2025 Satoshi Soma</p>

---

# サイト更新の効率化

---

## 「公開して終わり」では勿体無い
サイトを公開するだけで満足してはいけない。
更新されないウェブサイトはやがて検索一覧の中に埋もれてしまう。

---

## 現状の問題点
- *コンテント（ページ）の追加 ＝ HTML ファイルの追加*
  - 既存の HTML ファイルをコピーしなければならないため*面倒*である。
  - ヘッダー, フッターなど、*サイト全体を通して共通の箇所*に変更を加えたくなった場合、
  コピーして追加した**全て**の HTML ファイルに変更を加えなければならない。

<hr>

一般的な*ブログシステム*のように、記事の*タイトルと本文*（＝コンテント）を投稿するだけで
**自動でページが生成されるような仕組み**が欲しい。

---

## 制作環境の整理
ここからは作業全体が複雑化し、使用するファイルの数が一気に増える。
混乱を避けるため、ここで改めて制作環境の整理をしよう。

<hr>

これまで作業場として使用してきた `WORKSPACE` フォルダは今後、
「**プロジェクト・ルート (Project Root)**」と呼称する。

そして、フォルダ名を `WORKSPACE` ではなく**自分のサイト名を表す文字列**<small>（半角英数）</small>に変更し、
デスクトップやドキュメントフォルダなどの*アクセスしやすい場所に移動*してほしい。

加えて、**サイトに必要の無いファイルは全て削除**すること。

---

## Hugo のインストール

### Hugo の実行ファイルをダウンロード
以下のページより最新のバージョンの実行ファイルを DL する。
https://github.com/gohugoio/hugo/releases

ファイル名に *`darwin`* が含まれるものが macOS 用だ。

<hr>

DL したファイルを展開すると *`hugo`* というファイルが出てくる。これが実行ファイルだ。

---

### 実行ファイルを移動
`hugo` を自分のプロジェクトルート直下に移動させよう。

```
📁 プロジェクトルート
├── index.html
├── style.css
├── ...
└── hugo
```

---

## ターミナルの使い方
Hugo はダブルクリックで実行する一般的なアプリとは異なり、
**CLI アプリケーション**と呼ばれるものに属する。
CLI とは *Command Line Interface（コマンドライン・インターフェース）* の略だ。

<hr>

それに対し、ダブルクリックで専用のウィンドウが開くような一般的な形式のソフトウェアは
**GUI (Graphical User Interface) アプリケーション**と呼び区別される。

---

基本的に CLI アプリは*ターミナル上で使用*されることを前提に設計されている。
早速ターミナルを開いてみよう。

```sh
%
```

表示されている `%` 記号の後に続けて「*コマンド*」と呼ばれる文字列を入力する。
`Enter` キーをタイプするとコマンドを実行することができる。

<hr>

試しに `ls` というコマンドを実行してみよう。

```sh
% ls
```

すると `Pictures` や `Documents` といったフォルダの一覧が表示されるはずだ。

---

### 代表的なコマンド

| コマンド名 | 説明 | 用例 |
| :-- | :-- | :-- |
| `echo` | 文字列を出力する | `echo "Hello!"`
| `pwd`  | 現在の作業ディレクトリを表示する | `pwd`
| `ls`   | ファイル & フォルダの一覧を表示する | `ls`
| `cd`   | ディレクトリを移動する | `cd Desktop/Downloads`
| `cat`  | ファイルの内容を出力する | `cat file.txt`
| `cp`   | ファイルをコピーする | `cp alfa.txt bravo.txt`
| `mv`   | ファイルを移動する | `mv file.txt Desktop/`
| `rm`   | ファイルを削除する | `rm file.txt`

---

ターミナルには**作業ディレクトリ (Working Directory)** という概念が存在する。
ディレクトリは「*📁 フォルダ*」と読み替えても差し支えない。
要するに、**自分が現在どのフォルダに居るのか**を示すものだ。

<hr>

現在の作業ディレクトリは `pwd` コマンドで確認できる。
作業ディレクトリを変更する、つまりフォルダを移動するには `cd` コマンドを使う。

```sh
% cd 移動先ディレクトリ名
```

ターミナルで何らかの作業を行う際は、
`cd` コマンドでまず**作業場となるフォルダまで移動**することを心掛けよう。

---

### Mac の大まかなディレクトリ構成

```
/ （ルート）
├── 📁 System/  （OS のシステムファイル群）
├── 📁 Applications/  （アプリケーション群）
│   ├── Safari.app
│   ├── Mail.app
│   └── ...
└── 📁 Users/  （各ユーザーのホームディレクトリ群）
    ├── 👤 alice    （alice のホームディレクトリ）
    ├── 👤 bob      （bob のホームディレクトリ）
    └── 👤 charlie  （charlie のホームディレクトリ）
        ├── 📁 Desktop/    （charlie のデスクトップ）
        ├── 📁 Downloads/  （charlie のダウンロードファイル群）
        └── ...
```

普段デスクトップに表示されているファイルやフォルダは全て、
実際は *`/Users/自分のユーザー名/Desktop`* というディレクトリ下に存在している。

---

早速 `cd` コマンドでプロジェクトルートまで移動しよう。
デスクトップに置いてある場合はまず、

```sh
% cd
```

このように*移動先を指定せず*に `cd` コマンドを実行する。
すると自分の**ホームディレクトリ**、すなわち `/Users/自分のユーザー名` に移動することができる。
そのあとは単に、

```sh
% cd Desktop
```

とだけ実行すれば `/Users/自分のユーザー名/Desktop` に移動することができる。

---

ちなみに、ディレクトリ名やファイル名はいちいち全て手入力しなくても、
**途中まで入力してから `Tab` キー**を押せば自動で補完される。

<hr>

もし移動先のディレクトリを間違ってしまったら、

```sh
% cd ..
```

で**一つ上の階層**のディレクトリに戻ることができる。

<hr>

また、**`↑`** キーをタイプすると、**過去に実行したコマンドの履歴を遡る**ことができる。覚えておこう。

---

`ls` コマンドでフォルダの一覧を表示し、プロジェクトルートの存在を確認したら、

```sh
% cd プロジェクトルートの名前
```

でプロジェクトルートに移動する。移動先は *`Tab` キーで補完*できることを忘れずに。

次に `ls` コマンドでファイルの一覧を表示し、
その中に先ほどダウンロードして移動させた *`hugo`* ファイルが存在することを確認する。

---

#### ここまでのまとめ :: ターミナルの操作
| コマンド or 入力キー | 説明 |
| :-- | :-- |
| `cd` | 自分のホームディレクトリに移動
| `cd 移動先ディレクトリ名` | 任意のディレクトリに移動
| `cd ..` | 一つ上の階層のディレクトリに移動
| `pwd` | 現在地（作業ディレクトリ）の確認
| `ls` | 作業ディレクトリ内のファイル & フォルダ一覧を表示
| `Tab` キー | ファイル名の自動補完
| `↑` キー | コマンドの実行履歴を遡る

---

## Hugo の使い方 
Hugo は以下のようなコマンドで実行可能だ。

```sh
% ./hugo サブコマンド
```

サブコマンドの一覧は

```sh
% ./hugo help
```

で確認することができる。

---

### テーマをインストールする
Hugo における「**テーマ**」とは端的に言うとウェブサイトのコンテント**以外**の部分、
言うなれば “*ガワ*” のことを指す。

<div class="cols gap">

![](img/website-theme.png)

<div>
この作例で言う所の

- Header
- Menu
- Footer

がテーマに属する部分とだいたい言える。
</div>

</div>

---

Hugo のテーマは以下のページから好きなものを選んで使うことができる。
https://themes.gohugo.io/

テーマを実際に使用するためには `プロジェクトルート` 下に *`themes`* というディレクリを作成し、
その中に DL したテーマフォルダを置く必要がある。

```
📁 プロジェクトルート
├── 📁 themes
│   └── 📁 テーマフォルダ
├── ...
└── hugo
```

まずは *`mkdir`* コマンドで `themes` フォルダを作成しよう。

```sh
% mkdir themes
```

<small>注意: *作業ディレクトリ*がプロジェクトルートであることを確認してからコマンドを実行すること。</small>

---

今回は *[Ardeidae](https://themes.gohugo.io/themes/ardeidae/)* <small>（発音: アルディーエダエ）</small> というテーマを使うことにする。

1. 「Download」をクリックし、GitHub のページへ。
2. 「Code」をクリック。
3. *HTTPS* の URL ( `https://github.com/LuisSousaRego/Ardeidae.git` ) をコピー。
4. ターミナルで、先ほど作成した `themes` フォルダに移動する。
```sh
% cd themes
```
5. *`git clone`* コマンドでテーマを DL する。
```sh
% git clone コピーしたURL
```

`プロジェクトルート/themes` 直下に `Ardeidae` フォルダができていればテーマのインストールは成功だ。
*`ls`* コマンドで確認してみよう。

---

### サイトを起動する
`cd ..` コマンドでプロジェクトルートに戻り、以下のコマンドを実行する。

```sh
% ./hugo server -D -t Ardeidae
```

*`hugo server`* は**サイトを動作させるためのサーバー**を起動するためのコマンドだ。
その後ろの `-t Ardeidae` の部分は「*Ardeidae をテーマとしてサイトを構築せよ*」という指定だ。

<hr>

サーバーの起動に成功したらブラウザで以下の URL にアクセスすることで、
サイトの動作確認を行うことができる。
http://localhost:1313

---

### ページを作成する
現状、サイトにはコンテントが何も存在しない空っぽの状態だ。
起動したサーバーを一旦停止させ、ページをいくつか作成してみよう。
サーバーを停止させるには `Control` + `C` を押す。

まずは `content` というフォルダを作成する。

```sh
% mkdir content
```

新しいページを作成するには *`hugo new content ファイル名`* というコマンドを実行する。
試しに `hello.html` というファイル名でページを作成してみよう。

```sh
% ./hugo new content hello.html
```

そして再びサーバーを起動し、ページが作成されているかを確認する。

```sh
% ./hugo server -D -t Ardeidae 
```

----

作成したページは `content` フォルダ内に保存されている。

`content/hello.html` をエディターで編集してみよう。
編集した内容は即座にブラウザにも反映される。

---

